<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>BloomDiet ‚Äì ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û & AI ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fdfafb;
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh;
    }
    .container {
      max-width: 600px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
    }
    h1 { color: #e91e63; text-align: center; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select {
      width: 100%; padding: 8px; margin-top: 5px;
      border: 1px solid #ddd; border-radius: 8px;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background: #e91e63;
      color: #fff; border: none;
      border-radius: 25px;
      font-size: 16px; cursor: pointer;
    }
    button:hover { background: #d81b60; }
    .result {
      margin-top: 20px;
      padding: 10px;
      border-radius: 8px;
      background: #fce4ec;
    }
    .error { color: #e53935; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üå∏ BloomDiet</h1>
    <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å AI</p>

    <label>‡πÄ‡∏û‡∏®</label>
    <select id="gender">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
      <option value="Male">‡∏ä‡∏≤‡∏¢</option>
      <option value="Female">‡∏´‡∏ç‡∏¥‡∏á</option>
    </select>

    <label>‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ)</label>
    <input type="number" id="age" min="1" max="120" />

    <label>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label>
    <input type="number" id="height" min="100" max="250" />

    <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</label>
    <input type="number" id="weight" min="20" max="300" />

    <label>‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</label>
    <select id="disease">
      <option value="None">‡πÑ‡∏°‡πà‡∏°‡∏µ</option>
      <option value="Diabetes">‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô</option>
      <option value="Hypertension">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï‡∏™‡∏π‡∏á</option>
      <option value="Heart">‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à</option>
      <option value="Obesity">‡πÇ‡∏£‡∏Ñ‡∏≠‡πâ‡∏ß‡∏ô</option>
    </select>

    <label>‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
    <select id="allergies">
      <option value="None">‡πÑ‡∏°‡πà‡∏°‡∏µ</option>
      <option value="Gluten">Gluten</option>
      <option value="Dairy">‡∏ô‡∏°</option>
      <option value="Nuts">‡∏ñ‡∏±‡πà‡∏ß</option>
      <option value="Seafood">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•</option>
      <option value="Eggs">‡πÑ‡∏Ç‡πà</option>
    </select>

    <label>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</label>
    <input type="number" id="exerciseHours" step="0.5" min="0" max="50" />

    <button onclick="submitToAPI()">‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏ß‡∏¢ AI üçΩÔ∏è</button>

    <div id="result" class="result"></div>
  </div>

  <script>
    function formData() {
      const gender = document.getElementById("gender").value;
      const age = Number(document.getElementById("age").value);
      const height = Number(document.getElementById("height").value);
      const weight = Number(document.getElementById("weight").value);
      const disease = document.getElementById("disease").value;
      const allergies = document.getElementById("allergies").value;
      const exercise_hours = Number(document.getElementById("exerciseHours").value);

      let bmi = null;
      if (height && weight) {
        bmi = +(weight / ((height/100)**2)).toFixed(2);
      }
      return { gender, age, height_cm: height, weight_kg: weight, bmi, disease, allergies, exercise_hours };
    }

    async function submitToAPI() {
      const resultEl = document.getElementById("result");
      resultEl.innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢...";
      try {
        const res = await fetch("/api/predict-one", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ data: formData() })
        });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const json = await res.json();
        resultEl.innerHTML = `
          ‚úÖ <b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> ${json.prediction}<br/>
          <small>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô:</small>
          <pre>${JSON.stringify(json.probabilities, null, 2)}</pre>
        `;
      } catch (err) {
        resultEl.innerHTML = `<span class="error">‚ùå Failed to fetch: ${err.message}</span>`;
      }
    }
  </script>
</body>
</html>


